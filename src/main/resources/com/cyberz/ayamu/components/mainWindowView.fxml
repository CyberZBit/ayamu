<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="600.0" prefWidth="900.0" stylesheets="@../style.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.cyberz.ayamu.Controllers.MainController">

    <top >
        <HBox id="top-bar" alignment="CENTER" spacing="15.0" BorderPane.alignment="CENTER" onKeyPressed="#onUndoButtonCombo" >
            <padding>
                <Insets bottom="10.0" left="20.0" right="20.0" top="10.0" />
            </padding>
            <children>
                <HBox id="color-palette" spacing="4.0">
                    <Button fx:id="colorBlack"  styleClass="color-btn, color-black"  userData="#1E1E1E" onAction="#setBrushColor"/>
                    <Button fx:id="colorRed"    styleClass="color-btn, color-red"    userData="#E53935" onAction="#setBrushColor"/>
                    <Button fx:id="colorOrange" styleClass="color-btn, color-orange" userData="#FB8C00" onAction="#setBrushColor"/>
                    <Button fx:id="colorYellow" styleClass="color-btn, color-yellow" userData="#FDD835" onAction="#setBrushColor"/>
                    <Button fx:id="colorGreen"  styleClass="color-btn, color-green"  userData="#43A047" onAction="#setBrushColor"/>
                    <Button fx:id="colorBlue"   styleClass="color-btn, color-blue"   userData="#1E88E5" onAction="#setBrushColor"/>
                    <Button fx:id="colorIndigo" styleClass="color-btn, color-indigo" userData="#3949AB" onAction="#setBrushColor"/>
                    <Button fx:id="colorPurple" styleClass="color-btn, color-purple" userData="#8E24AA" onAction="#setBrushColor"/>
                    <Button fx:id="colorPink"   styleClass="color-btn, color-pink"   userData="#EC407A" onAction="#setBrushColor"/>
                    <Button fx:id="colorBrown"  styleClass="color-btn, color-brown"  userData="#6D4C41" onAction="#setBrushColor"/>
                    <Button fx:id="colorGrey"   styleClass="color-btn, color-grey"   userData="#757575" onAction="#setBrushColor"/>
                    <Button fx:id="colorWhite"  styleClass="color-btn, color-rainbow" onAction="#openColorPicker"/>
                </HBox>

                <Pane HBox.hgrow="ALWAYS" />

                <HBox alignment="CENTER" spacing="10.0">
                    <Label style="-fx-font-size: 18px;" text="ðŸ–Œ" textFill="WHITE" />
                    <Slider fx:id="brushSizeSlider" max="50.0" min="1.0" prefWidth="150.0" showTickLabels="true" value="2.0"/>
                </HBox>

                <Pane HBox.hgrow="ALWAYS" />

                <HBox alignment="CENTER" spacing="10.0">
                    <Button fx:id="undoBtn" onAction="#doUndoChange" styleClass="icon-text-btn" text="â†¶" />
                    <Button fx:id="redoBtn" styleClass="icon-text-btn" text="â†·" />
                </HBox>
            </children>
        </HBox>
    </top>

    <left>
        <VBox id="left-toolbar" alignment="TOP_CENTER" prefWidth="80.0" spacing="20.0" BorderPane.alignment="CENTER">
            <padding>
                <Insets bottom="20.0" top="20.0" />
            </padding>
            <children>
                <Label id="toolsTitle" text="Tools" textFill="WHITE" />

                <Button fx:id="pencilBtn" onAction="#openBrushEditor" styleClass="tool-btn">
                    <graphic>
                        <ImageView fitHeight="24.0" fitWidth="24.0" pickOnBounds="true" preserveRatio="true">
                            <image><Image url="@../images/pencil-icon.png" /></image>
                        </ImageView>
                    </graphic>
                </Button>

                <Button fx:id="saveImageBtn" onAction="#saveCanvasImage" styleClass="tool-btn">
                    <graphic>
                        <ImageView fitHeight="24.0" fitWidth="24.0" pickOnBounds="true" preserveRatio="true">
                            <image><Image url="@../images/saveImage-icon.png" /></image>
                        </ImageView>
                    </graphic>
                </Button>

                <Button fx:id="eraserBtn" onAction="#eraseCanvasContents" styleClass="tool-btn">
                    <graphic>
                        <ImageView fitHeight="24.0" fitWidth="24.0" pickOnBounds="true" preserveRatio="true">
                            <image><Image url="@../images/delete.png" /></image>
                        </ImageView>
                    </graphic>
                </Button>

                <Button fx:id="textBtn" styleClass="tool-btn">
                    <graphic>
                        <ImageView fitHeight="24.0" fitWidth="24.0" pickOnBounds="true" preserveRatio="true">
                            <image><Image url="@../images/text-icon.png" /></image>
                        </ImageView>
                    </graphic>
                </Button>

            </children>
        </VBox>
    </left>

    <center>
        <Pane id="canvas-container" BorderPane.alignment="CENTER">
            <children>
                <Canvas fx:id="canvasView" height="800.0" onMouseDragged="#drawCircle" onMousePressed="#startPath" onMouseReleased="#saveCanvasChange" width="1200.0" />
            </children>
        </Pane>
    </center>

    <bottom>
        <Pane id="bottom-bar" prefHeight="40.0" BorderPane.alignment="CENTER" />
    </bottom>

</BorderPane>
